<meta name="viewport" content="width=device-width, initial-scale=1" />
<script>
    const PARAM_MILO_LIBS = 'milolibs';
    const searchParams = new URLSearchParams(window.location.search);
    const getMiloLibs = () => {
        const milolibs = searchParams?.get(PARAM_MILO_LIBS);
        if (!milolibs) return 'https://milo.adobe.com/libs';
        if ('local' === milolibs) return 'http://localhost:6456/libs';
        return `https://${milolibs}.aem.page/libs`;
    };
    const libs = getMiloLibs();
    // const libs = (() => {
    //     const { hostname, search } = window.location;
    //     if (!['.aem.', '.stage.', 'local'].some((i) => hostname.includes(i))) return '/libs';
    //     const branch = new URLSearchParams(search).get('milolibs') || 'main';
    //     if (branch === 'local') return 'http://localhost:6456/libs';
    //     return branch.includes('--') ? `https://${branch}.aem.live/libs` : `https://${branch}--milo--adobecom.aem.live/libs`;
    // })();

    const miloStyles = document.createElement('link');
    const miloUtils = document.createElement('link');
    const miloDecorate = document.createElement('link');

    miloScripts.setAttribute('type', 'module');
    miloStyles.setAttribute('as', 'style');
    miloStyles.setAttribute('href', `${libs}/styles/styles.css`);

    [miloUtils, miloDecorate].forEach((tag) => {
        tag.setAttribute('crossorigin', 'true');
        tag.setAttribute('as', 'script');
    });

    miloUtils.setAttribute('href', `${libs}/utils/utils.js`);
    miloDecorate.setAttribute('href', `${libs}/utils/decorate.js`);

    [miloStyles, miloUtils, miloDecorate].forEach((tag) => tag.setAttribute('rel', 'preload'));
    document.head.append(miloStyles, miloUtils, miloDecorate, miloScripts);
</script>
<script src="/scripts/scripts.js" type="module"></script>
